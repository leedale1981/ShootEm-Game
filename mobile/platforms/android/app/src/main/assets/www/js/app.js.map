{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/GameConfig.ts","webpack:///./js/sprites/Sprite.ts","webpack:///./js/GameObject.ts","webpack:///./js/app.ts","webpack:///./js/GameLoop.ts","webpack:///./js/KeyboardInput.ts","webpack:///./js/sprites/PlayerSpaceShip.ts","webpack:///./js/sprites/Bullet.ts","webpack:///./js/sprites/Star.ts","webpack:///./js/levels/LevelOne.ts","webpack:///./js/levels/Level.ts","webpack:///./js/levels/Wave.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","GameConfig","canvasHeight","canvasWidth","starDensity","Sprite","GameObject","ctx","options","super","this","drawImage","image","x","y","width","height","deltaX","deltaYForward","self","canvas","deltaYBackward","newImage","gameLoop","window","onload","document","getElementById","getContext","GameLoop","render","setupBackgroundStars","playerSprite","PlayerSpaceShip","setupPlayerSpaceshipKeyboardInputs","keyboardInput","KeyboardInput","addKeycodeCallback","moveLeft","addKeycodeUpCallback","removeSkew","moveForward","swapImageToNoThrust","moveRight","moveBack","fireBullet","stars","index","push","Star","levels","LevelOne","requestAnimationFrame","inputLoop","clearCanvas","moveStars","renderPlayerSprite","forEach","star","fillStyle","fillRect","keyCallback","keyUpCallback","keyDown","keyUp","keycode","f","keyboardDown","event","keyCode","preventDefault","keyboardUp","callback","addEventListener","bullets","canFire","swapImage","swapImageToThrust","skew","bullet","Bullet","setTimeout","parentSprite","getXCoord","getYCoord","Math","floor","random","beginPath","strokeStyle","lineWidth","arc","PI","stroke","Level","setupWaves","waveNumber","currentWave","waves","getFirstWave","isCompleted","Wave","enemies","completed","startDelay","startCount","setupEnemies","renderStartImage","enemy"],"mappings":"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","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","export class GameConfig {\r\n    public static canvasHeight = 720;\r\n    public static canvasWidth = 1280;\r\n    public static starDensity = 100;\r\n}","import { GameObject } from \"../GameObject\";\r\nimport { SpriteOptions } from \"./SpriteOptions\";\r\n\r\nexport class Sprite extends GameObject {\r\n\r\n    protected options: SpriteOptions;\r\n\r\n    constructor(\r\n        ctx: CanvasRenderingContext2D,\r\n        options: SpriteOptions) {\r\n            \r\n        super(ctx);\r\n        this.options = options;\r\n    }\r\n    \r\n    public render(): void {\r\n        let self = this;\r\n\r\n        self.ctx.drawImage(\r\n            self.options.image, \r\n            self.options.x, \r\n            self.options.y, \r\n            self.options.width, \r\n            self.options.height);\r\n    }\r\n\r\n    public moveLeft(): void {\r\n        let self = this;\r\n        self.options.x =  self.options.x - (self.options.deltaX);\r\n    }\r\n\r\n    public moveRight(): void {\r\n        let self = this;\r\n        self.options.x =  self.options.x + self.options.deltaX;\r\n    }\r\n\r\n    public moveForward(): void {\r\n        let self = this;\r\n        self.options.y =  self.options.y - self.options.deltaYForward;\r\n    }\r\n\r\n    public moveBack() : void {\r\n        let self = this;\r\n\r\n        if (self.options.y >= self.ctx.canvas.height) {\r\n            self.options.y = 0;\r\n        } else {\r\n            self.options.y =  self.options.y + self.options.deltaYBackward;\r\n        }\r\n    }\r\n\r\n    public swapImage(newImage: HTMLImageElement): void {\r\n        this.options.image = newImage;\r\n    }\r\n\r\n    public getXCoord(): number {\r\n        let self = this;\r\n        return self.options.x;\r\n    }\r\n\r\n    public getYCoord(): number {\r\n        let self = this;\r\n        return self.options.y;\r\n    }\r\n}","export class GameObject {\r\n\r\n    protected ctx: CanvasRenderingContext2D = null;\r\n\r\n    constructor(ctx: CanvasRenderingContext2D) {\r\n        this.ctx = ctx;\r\n    }\r\n}","import { GameLoop } from \"./GameLoop\";\r\n\r\nlet canvas: HTMLCanvasElement;\r\nlet ctx: CanvasRenderingContext2D;\r\nlet gameLoop: GameLoop;\r\n\r\nwindow.onload = () => {\r\n    canvas = <HTMLCanvasElement>document.getElementById(\"canvas\");\r\n    ctx = canvas.getContext(\"2d\");\r\n\r\n    gameLoop = new GameLoop(ctx);\r\n    gameLoop.render();\r\n}\r\n","import { GameConfig } from \"./GameConfig\";\r\nimport { GameObject } from \"./GameObject\";\r\nimport { KeyboardInput } from \"./KeyboardInput\";\r\nimport { PlayerSpaceShip } from \"./sprites/PlayerSpaceShip\";\r\nimport { Star } from \"./sprites/Star\";\r\nimport { Level } from \"./levels/Level\";\r\nimport { LevelOne } from \"./levels/LevelOne\";\r\n\r\nexport class GameLoop extends GameObject {\r\n\r\n    private playerSprite: PlayerSpaceShip;\r\n    private keyboardInput: KeyboardInput;\r\n    private stars: Array<Star>;\r\n    private levels: Array<Level>;\r\n\r\n    constructor(ctx: CanvasRenderingContext2D) {\r\n        super(ctx);\r\n        let self = this;\r\n\r\n        self.setupBackgroundStars();\r\n        self.playerSprite = new PlayerSpaceShip(ctx);\r\n        self.setupPlayerSpaceshipKeyboardInputs();\r\n    }\r\n\r\n    private setupPlayerSpaceshipKeyboardInputs() {\r\n        let self = this;\r\n\r\n        this.keyboardInput = new KeyboardInput();\r\n        this.keyboardInput.addKeycodeCallback(37, self.playerSprite.moveLeft.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeCallback(65, self.playerSprite.moveLeft.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeUpCallback(37, self.playerSprite.removeSkew.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeUpCallback(65, self.playerSprite.removeSkew.bind(self.playerSprite));\r\n\r\n        this.keyboardInput.addKeycodeCallback(38, self.playerSprite.moveForward.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeCallback(87, self.playerSprite.moveForward.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeUpCallback(38, self.playerSprite.swapImageToNoThrust.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeUpCallback(87, self.playerSprite.swapImageToNoThrust.bind(self.playerSprite));\r\n\r\n        this.keyboardInput.addKeycodeCallback(39, self.playerSprite.moveRight.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeCallback(68, self.playerSprite.moveRight.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeUpCallback(39, self.playerSprite.removeSkew.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeUpCallback(68, self.playerSprite.removeSkew.bind(self.playerSprite));\r\n\r\n        this.keyboardInput.addKeycodeCallback(40, self.playerSprite.moveBack.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeCallback(83, self.playerSprite.moveBack.bind(self.playerSprite));\r\n        this.keyboardInput.addKeycodeCallback(32, self.playerSprite.fireBullet.bind(self.playerSprite));\r\n    }\r\n\r\n    private setupBackgroundStars(): void {\r\n        let self = this;\r\n        self.stars = [];\r\n\r\n        for (let index = 0; index < GameConfig.starDensity; index++) {\r\n            self.stars.push(new Star(self.ctx));\r\n        }\r\n    }\r\n\r\n    private setupLevels(): void {\r\n        let self = this;\r\n        self.levels = [];\r\n\r\n        self.levels.push(new LevelOne());\r\n    }\r\n\r\n    public render(): void {\r\n        window.requestAnimationFrame(this.render.bind(this));\r\n        this.keyboardInput.inputLoop();\r\n        this.clearCanvas();\r\n        this.moveStars();\r\n        this.renderPlayerSprite();\r\n    }\r\n\r\n    private moveStars(): void {\r\n        let self = this;\r\n\r\n        self.stars.forEach((star: Star) => {\r\n            star.moveBack();\r\n            star.render();\r\n        });\r\n    }\r\n\r\n    private clearCanvas(): void {\r\n        let self = this;\r\n\r\n        self.ctx.fillStyle = \"black\";\r\n        self.ctx.fillRect(0, 0, GameConfig.canvasWidth, GameConfig.canvasHeight);\r\n    }\r\n\r\n    private renderPlayerSprite(): void {\r\n        let self = this;\r\n        self.playerSprite.render();\r\n    }\r\n\r\n    private \r\n}","export class KeyboardInput {\r\n\r\n    public keyCallback: { [keycode: number]: () => void; } = {};\r\n    public keyUpCallback: { [keycode: number]: () => void; } = {};\r\n    public keyDown: { [keycode: number]: boolean; } = {};\r\n    public keyUp: {[keycode: number]: boolean; } = {};\r\n\r\n    constructor() {\r\n        document.addEventListener('keydown', this.keyboardDown);\r\n        document.addEventListener('keyup', this.keyboardUp);\r\n    }\r\n\r\n    public addKeycodeCallback = (keycode: number, f: () => void): void => {\r\n        this.keyCallback[keycode] = f;\r\n        this.keyDown[keycode] = false;\r\n    }\r\n\r\n    public addKeycodeUpCallback = (keycode: number, f: () => void): void => {\r\n        this.keyUpCallback[keycode] = f;\r\n        this.keyUp[keycode] = false;\r\n    }\r\n\r\n    public keyboardDown = (event: KeyboardEvent): void => {\r\n        if (this.keyCallback[event.keyCode] != null) {\r\n            event.preventDefault();\r\n        }\r\n        this.keyDown[event.keyCode] = true;\r\n        this.keyUp[event.keyCode] = false;\r\n    }\r\n\r\n    public keyboardUp = (event: KeyboardEvent): void => {\r\n        this.keyUp[event.keyCode] = true;\r\n        this.keyDown[event.keyCode] = false;\r\n    }\r\n\r\n    public inputLoop = (): void => {\r\n        for (var key in this.keyDown) {\r\n            var is_down: boolean = this.keyDown[key];\r\n\r\n            if (is_down) {\r\n                var callback: () => void = this.keyCallback[key];\r\n                if (callback != null) {\r\n                    callback();\r\n                }\r\n            }\r\n        }\r\n\r\n        for (var key in this.keyUp) {\r\n            var is_up: boolean = this.keyUp[key];\r\n\r\n            if (is_up) {\r\n                var callback: () => void = this.keyUpCallback[key];\r\n                if (callback != null) {\r\n                    callback();\r\n                    this.keyUp[key] = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import { Sprite } from \"./Sprite\";\r\nimport { GameConfig } from \"../GameConfig\";\r\nimport { Bullet } from \"./Bullet\";\r\nimport * as SpriteOptions from \"./SpriteOptions\";\r\n\r\nexport class PlayerSpaceShip extends Sprite {\r\n\r\n    private bullets: Array<Bullet>;\r\n    private canFire: boolean;\r\n\r\n    constructor(ctx: CanvasRenderingContext2D) { \r\n        let image: HTMLImageElement = <HTMLImageElement>document.getElementById(\"player-spaceship\");\r\n        let width: number = 60;\r\n        let height: number = 60;\r\n        let initialX: number = (GameConfig.canvasWidth / 2) - (width / 2);\r\n        let initialY: number = (GameConfig.canvasHeight - 50);\r\n\r\n        let spriteOptions: SpriteOptions.SpriteOptions = {\r\n            height: height,\r\n            width: width,\r\n            x: initialX,\r\n            y: initialY,\r\n            image: image,\r\n            deltaX: 4,\r\n            deltaYForward: 5,\r\n            deltaYBackward: 3\r\n        };\r\n\r\n        super(ctx, spriteOptions);\r\n        this.bullets = [];\r\n        this.canFire = true;\r\n    }\r\n\r\n    public swapImageToThrust() {\r\n        let newImage: HTMLImageElement = <HTMLImageElement>document.getElementById(\"player-spaceship-with-thrust\");\r\n        super.swapImage(newImage);\r\n    }\r\n\r\n    public swapImageToNoThrust() {\r\n        let image: HTMLImageElement = <HTMLImageElement>document.getElementById(\"player-spaceship\");\r\n        super.swapImage(image);\r\n    }\r\n\r\n    public moveForward(): void {\r\n        let self = this;\r\n        self.swapImageToThrust();\r\n        super.moveForward();\r\n    }\r\n\r\n    public moveLeft(): void {\r\n        let self = this;\r\n        self.skew();\r\n        super.moveLeft();\r\n    }\r\n\r\n    public moveRight(): void {\r\n        let self = this;\r\n        self.skew();\r\n        super.moveRight();\r\n    }\r\n\r\n    public moveBack(): void {\r\n        let self = this;\r\n        self.swapImageToNoThrust();\r\n        super.moveBack();\r\n    }\r\n\r\n    public fireBullet() {\r\n        let self = this;\r\n\r\n        if (self.canFire) {\r\n            let bullet: Bullet = new Bullet(self.ctx, self);\r\n            bullet.moveForward();\r\n            self.bullets.push(bullet);\r\n            self.canFire = false;\r\n            \r\n            setTimeout(() => {\r\n                self.canFire = true;\r\n            }, 300);\r\n        }\r\n    }\r\n\r\n    private skew(): void {\r\n        let self = this;\r\n\r\n        if (self.options.width > 40) {\r\n            self.options.width = self.options.width / 1.1;\r\n        }\r\n    }\r\n\r\n    public removeSkew(): void {\r\n        let self = this;\r\n        self.options.width = 60;\r\n    }\r\n\r\n    public render(): void {\r\n        let self = this;\r\n        \r\n        self.bullets.forEach((bullet: Bullet) => {\r\n            bullet.render();\r\n        });\r\n\r\n        super.render();\r\n    }\r\n}\r\n","import { Sprite } from \"./Sprite\";\r\nimport { GameConfig } from \"../GameConfig\";\r\nimport * as SpriteOptions from \"./SpriteOptions\";\r\n\r\nexport class Bullet extends Sprite {\r\n    private parentSprite: Sprite;\r\n\r\n    constructor(ctx: CanvasRenderingContext2D, parentSprite: Sprite) { \r\n        let image: HTMLImageElement = <HTMLImageElement>document.getElementById(\"player-bullet\");\r\n\r\n        let initialX: number = parentSprite.getXCoord() + 20;\r\n        let initialY: number = parentSprite.getYCoord() - 20;\r\n\r\n        let spriteOptions: SpriteOptions.SpriteOptions = {\r\n            height: 20,\r\n            width: 20,\r\n            x: initialX,\r\n            y: initialY,\r\n            image: image,\r\n            deltaX: 0,\r\n            deltaYForward: 1,\r\n            deltaYBackward: 1\r\n        };\r\n\r\n        super(ctx, spriteOptions);\r\n    }\r\n\r\n    public moveForward() {\r\n        let self = this;\r\n\r\n        setTimeout(() => {\r\n            if (self.options.y > 0) {\r\n                self.options.y = self.options.y - self.options.deltaYForward;\r\n                self.moveForward();\r\n            }\r\n        }, 5);\r\n    }\r\n}","import { Sprite } from \"./Sprite\";\r\nimport { GameConfig } from \"../GameConfig\";\r\nimport * as SpriteOptions from \"./SpriteOptions\";\r\n\r\nexport class Star extends Sprite {\r\n\r\n    constructor(ctx: CanvasRenderingContext2D) {\r\n        let width: number = 2;\r\n        let height: number = 2;\r\n        let initialX: number = Math.floor(Math.random() * GameConfig.canvasWidth) + 1;\r\n        let initialY: number = Math.floor(Math.random() * GameConfig.canvasHeight) + 1;\r\n\r\n        let spriteOptions: SpriteOptions.SpriteOptions = {\r\n            height: height,\r\n            width: width,\r\n            x: initialX,\r\n            y: initialY,\r\n            image: null,\r\n            deltaX: 2,\r\n            deltaYForward: 1,\r\n            deltaYBackward: 2\r\n        };\r\n\r\n        super(ctx, spriteOptions);\r\n    }\r\n\r\n    public render(): void {\r\n        let self = this;\r\n        \r\n        self.ctx.beginPath();\r\n        self.ctx.strokeStyle = \"white\";\r\n        self.ctx.lineWidth = self.options.width;\r\n        self.ctx.arc(self.options.x, self.options.y, 1, 0, Math.PI);\r\n        self.ctx.stroke();\r\n    }\r\n}","import { Level } from \"./Level\";\r\nimport { Wave } from \"./Wave\";\r\n\r\nexport class LevelOne extends Level {\r\n    \r\n    constructor() {\r\n        super();\r\n        this.setupWaves();\r\n        this.waveNumber = 0;\r\n        this.currentWave = this.waves[this.waveNumber];\r\n    } \r\n\r\n    private setupWaves(): void {\r\n        this.waves = [];\r\n        this.waves.push(this.getFirstWave());\r\n    }\r\n\r\n    public render(): void {\r\n        if (this.currentWave.isCompleted) {\r\n            this.waveNumber++;\r\n            this.currentWave = this.waves[this.waveNumber];\r\n        }\r\n\r\n        this.currentWave.render();\r\n    }\r\n\r\n    private getFirstWave(): Wave {\r\n        let wave: Wave = new Wave();\r\n\r\n        return wave;\r\n    }\r\n}","import { Wave } from \"./Wave\";\r\n\r\nexport class Level {\r\n    public currentWave: Wave;\r\n    public waves: Array<Wave>;\r\n    public waveNumber: number;\r\n}","import { Sprite } from \"../sprites/Sprite\";\r\nimport { Enemy1 } from \"../sprites/Enemy1\";\r\n\r\nexport class Wave {\r\n    \r\n    private enemies: Array<Sprite> = [];\r\n    private completed: boolean = false;\r\n    private startDelay: number = 1000;\r\n    private startCount: number = 0;\r\n\r\n    constructor() {\r\n        this.setupEnemies();\r\n    }\r\n\r\n    public render(): void {\r\n        let self = this;\r\n\r\n        if (self.startCount <= self.startDelay) {\r\n            this.renderStartImage();\r\n            self.startCount++;\r\n        }\r\n        else {\r\n            self.enemies.forEach((enemy: Sprite) => {\r\n                enemy.render();\r\n            });\r\n        }\r\n    }\r\n\r\n    private renderStartImage(): void {\r\n\r\n    }\r\n\r\n    private setupEnemies(): void {\r\n        //this.enemies.push(new Enemy1())\r\n    }\r\n\r\n    public isCompleted(): boolean {\r\n        return this.completed;\r\n    }\r\n}"],"sourceRoot":""}